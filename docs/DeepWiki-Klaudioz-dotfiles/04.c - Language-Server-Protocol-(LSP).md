[/](/)

[/search](/search)

[/wiki](/wiki)

[/settings/members](/settings/members)

[/settings/support](/settings/support)

[Add repo](/repositories)

[All repos](/wiki)

[backend](/wiki/Klaudioz/backend)

[BH-Workflow-Engine](/wiki/Klaudioz/BH-Workflow-Engine)

[Buckhead_CRM](/wiki/Klaudioz/Buckhead_CRM)

[dotfiles](/wiki/Klaudioz/dotfiles)

[frontend](/wiki/Klaudioz/frontend)

[godeep.wiki-jb](/wiki/Klaudioz/godeep.wiki-jb)

[pi-mono-zero](/wiki/Klaudioz/pi-mono-zero)

[VirtualOracle](/wiki/Klaudioz/VirtualOracle)

# Language Server Protocol (LSP)Link copied!

> **Relevant source files**
> * [nvim/lazy-lock.json](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json)
> * [nvim/lua/config/keymaps.lua](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/config/keymaps.lua)
> * [nvim/lua/plugins/copilot.lua](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/copilot.lua)
> * [nvim/lua/plugins/go.lua](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua)

## Purpose and ScopeLink copied!

This document details the Language Server Protocol (LSP) configuration in Neovim, covering the installation and management of language servers through `mason.nvim`, their configuration via `nvim-lspconfig`, and language-specific setups. LSP provides core code intelligence features including completion, diagnostics, go-to-definition, and refactoring. This page focuses specifically on LSP server configuration and integration; for related topics, see [Code Intelligence and Completion](#4.6) for completion UI and AI-assisted features, [Debug Adapter Protocol (DAP)](#4.4) for debugging capabilities, and [Code Formatting and Linting](#4.8) for code quality tools.

## LSP Architecture OverviewLink copied!

The LSP configuration follows a three-layer architecture where each component has a distinct responsibility in the language server lifecycle.

### Component Interaction DiagramLink copied!

```mermaid
flowchart TD

User["User"]
Buffer["Neovim Buffer (opened file)"]
LazyNvim["lazy.nvim (plugin manager)"]
LazyLock["lazy-lock.json (version lock)"]
Mason["mason.nvim (tool installer)"]
MasonLspConfig["mason-lspconfig.nvim (bridge plugin)"]
MasonRegistry["Mason Registry (available servers)"]
LspConfig["nvim-lspconfig (server configs)"]
ServerConfigs["Language-Specific Configs (lua/plugins/*.lua)"]
Gopls["gopls (Go)"]
TsServer["ts_ls (TypeScript)"]
Lua_ls["lua_ls (Lua)"]
OtherServers["Other Servers (yaml, json, etc)"]
LspClient["LSP Client (built-in)"]

Buffer --> LspClient
LazyNvim --> Mason
LazyNvim --> MasonLspConfig
LazyNvim --> LspConfig
Mason --> Gopls
Mason --> TsServer
Mason --> Lua_ls
Mason --> OtherServers
MasonLspConfig --> LspConfig
LspConfig --> Gopls
LspConfig --> TsServer
LspConfig --> Lua_ls
LspConfig --> OtherServers
Gopls --> LspClient
TsServer --> LspClient
Lua_ls --> LspClient
OtherServers -->|"provides features to"| LspClient
LspClient --> Buffer

subgraph subGraph5 ["LSP Protocol"]
    LspClient
end

subgraph subGraph4 ["Language Servers"]
    Gopls
    TsServer
    Lua_ls
    OtherServers
end

subgraph subGraph3 ["LSP Configuration Layer"]
    LspConfig
    ServerConfigs
    LspConfig --> ServerConfigs
end

subgraph subGraph2 ["LSP Installation Layer"]
    Mason
    MasonLspConfig
    MasonRegistry
    Mason --> MasonRegistry
    MasonLspConfig --> Mason
end

subgraph subGraph1 ["Plugin Management Layer"]
    LazyNvim
    LazyLock
    LazyNvim --> LazyLock
end

subgraph subGraph0 ["User Layer"]
    User
    Buffer
    User --> Buffer
end
```

**Sources:** [nvim/lazy-lock.json L21-L37](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json#L21-L37)

### Plugin Version ManagementLink copied!

The LSP ecosystem plugins are version-locked in `lazy-lock.json` to ensure reproducible builds:

| Plugin | Purpose | Locked Commit |
| --- | --- | --- |
| `mason.nvim` | Language server installer | `fc98833b6da5` |
| `mason-lspconfig.nvim` | Bridge between mason and lspconfig | `1a31f824b9cd` |
| `nvim-lspconfig` | Language server configurations | `c8b90ae5cbe2` |

**Sources:** [nvim/lazy-lock.json L21-L37](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json#L21-L37)

## Mason.nvim: Language Server InstallationLink copied!

`mason.nvim` provides a unified interface for installing language servers, formatters, linters, and debug adapters. It manages these tools in an isolated environment, separate from system package managers.

### Installation ArchitectureLink copied!

```mermaid
flowchart TD

MasonCmd[":Mason command"]
MasonInstall[":MasonInstall"]
Registry["Mason Registry (github.com/mason-org/mason-registry)"]
Installer["Package Installer"]
Storage["~/.local/share/nvim/mason/"]
BinDir["bin/ (executables)"]
PackagesDir["packages/ (full installations)"]
LspServers["Language Servers (gopls, ts_ls, lua_ls)"]

MasonCmd --> Registry
MasonInstall --> Installer
Storage --> BinDir
Storage --> PackagesDir
BinDir --> LspServers

subgraph subGraph2 ["Installed Tools"]
    BinDir
    PackagesDir
end

subgraph subGraph1 ["Mason Core"]
    Registry
    Installer
    Storage
    Registry --> Installer
    Installer --> Storage
end

subgraph subGraph0 ["Mason UI"]
    MasonCmd
    MasonInstall
end
```

Mason stores all installed tools in `~/.local/share/nvim/mason/`, making them available to Neovim without polluting the system PATH. The `mason-lspconfig.nvim` plugin provides automatic setup, ensuring that installed language servers are automatically configured with sensible defaults.

**Sources:** [nvim/lazy-lock.json L21-L23](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json#L21-L23)

## nvim-lspconfig: Server ConfigurationLink copied!

`nvim-lspconfig` provides configuration templates for over 100 language servers. It handles the attachment of language servers to buffers based on filetype detection.

### Configuration FlowLink copied!

```mermaid
sequenceDiagram
  participant User
  participant Neovim
  participant nvim-lspconfig
  participant lua/plugins/*.lua
  participant Language Server
  participant Buffer

  User->>Neovim: Open file (e.g. | main.go)
  Neovim->>Neovim: Detect filetype (go)
  Neovim->>nvim-lspconfig: Request server for filetype
  nvim-lspconfig->>lua/plugins/*.lua: Check for custom opts
  lua/plugins/*.lua-->>nvim-lspconfig: Return opts.servers.gopls
  nvim-lspconfig->>nvim-lspconfig: Merge default + custom config
  nvim-lspconfig->>Language Server: Start gopls with config
  Language Server-->>nvim-lspconfig: Server ready
  nvim-lspconfig->>Buffer: Attach server to buffer
  Buffer-->>User: LSP features available
  User->>Buffer: Type code
  Buffer->>Language Server: textDocument/didChange
  Language Server->>Language Server: Analyze code
  Language Server-->>Buffer: textDocument/publishDiagnostics
  Buffer-->>User: Show diagnostics
```

The configuration system uses a functional options pattern where custom configurations can extend or override default settings. The `opts` parameter in plugin specifications allows language-specific customization.

**Sources:** [nvim/lazy-lock.json L37](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json#L37-L37)

 [nvim/lua/plugins/go.lua L1-L24](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L1-L24)

## Language-Specific ConfigurationsLink copied!

Language servers can be customized through dedicated configuration files in the `lua/plugins/` directory. Each configuration file exports a table that modifies the behavior of `nvim-lspconfig`.

### Go Language Server (gopls)Link copied!

The Go configuration demonstrates comprehensive language server customization through analysis options, code formatting preferences, and completion behavior.

```mermaid
flowchart TD

GoFile["*.go file"]
FiletypeDetect["Filetype Detection"]
LspConfigSetup["nvim-lspconfig.gopls.setup()"]
CustomOpts["lua/plugins/go.lua opts.servers.gopls"]
Analyses["analyses: - unusedparams: true"]
Staticcheck["staticcheck: true"]
Placeholders["usePlaceholders: true"]
AutoImport["completeUnimported: true"]
Gofumpt["gofumpt: true"]
GoplsRunning["gopls process"]
AnalysisEngine["Analysis Engine"]
CompletionEngine["Completion Engine"]
FormatterEngine["Formatter Engine"]

FiletypeDetect --> LspConfigSetup
LspConfigSetup --> GoplsRunning
Analyses --> AnalysisEngine
Staticcheck --> AnalysisEngine
Placeholders --> CompletionEngine
AutoImport --> CompletionEngine
Gofumpt --> FormatterEngine

subgraph subGraph3 ["gopls Server Instance"]
    GoplsRunning
    AnalysisEngine
    CompletionEngine
    FormatterEngine
    AnalysisEngine --> GoplsRunning
    CompletionEngine --> GoplsRunning
    FormatterEngine --> GoplsRunning
end

subgraph subGraph2 ["gopls Settings"]
    Analyses
    Staticcheck
    Placeholders
    AutoImport
    Gofumpt
end

subgraph subGraph1 ["gopls Configuration"]
    LspConfigSetup
    CustomOpts
    CustomOpts --> LspConfigSetup
end

subgraph subGraph0 ["Go File Detection"]
    GoFile
    FiletypeDetect
    GoFile --> FiletypeDetect
end
```

#### gopls Configuration Details

The `gopls` configuration in [nvim/lua/plugins/go.lua L1-L24](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L1-L24)

 demonstrates several key customization patterns:

**Analysis Settings** [nvim/lua/plugins/go.lua L11-L13](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L11-L13)

:

* `unusedparams: true` - Detects unused function parameters
* `staticcheck: true` - Enables staticcheck analyzers for comprehensive code analysis

**Completion Settings** [nvim/lua/plugins/go.lua L15-L16](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L15-L16)

:

* `usePlaceholders: true` - Inserts placeholder text for function arguments during completion
* `completeUnimported: true` - Enables auto-import of unimported packages during completion

**Formatting Settings** [nvim/lua/plugins/go.lua L17](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L17-L17)

:

* `gofumpt: true` - Uses `gofumpt` (stricter `gofmt`) for code formatting

The configuration uses a functional options pattern [nvim/lua/plugins/go.lua L3-L22](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L3-L22)

 where the `opts` function receives existing options and returns modified options, allowing multiple plugins to compose configurations without conflicts.

**Sources:** [nvim/lua/plugins/go.lua L1-L24](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L1-L24)

### Configuration Extension PatternLink copied!

The standard pattern for extending language server configurations follows this structure:

```mermaid
flowchart TD

PluginFile["lua/plugins/.lua"]
ReturnTable["return { ... }"]
PluginSpec["plugin spec"]
OptsFunction["opts = function(_, opts)"]
ServersTable["opts.servers."]
SettingsTable["settings = { ... }"]
LspconfigReceives["lspconfig receives opts"]
ServerSetup["lspconfig..setup(opts)"]

ReturnTable --> PluginSpec
ServersTable --> LspconfigReceives

subgraph subGraph2 ["nvim-lspconfig Integration"]
    LspconfigReceives
    ServerSetup
    LspconfigReceives --> ServerSetup
end

subgraph subGraph1 ["Configuration Table"]
    PluginSpec
    OptsFunction
    ServersTable
    SettingsTable
    PluginSpec --> OptsFunction
    OptsFunction --> ServersTable
    ServersTable --> SettingsTable
end

subgraph subGraph0 ["Plugin File Structure"]
    PluginFile
    ReturnTable
    PluginFile --> ReturnTable
end
```

This pattern allows language-specific configuration files to remain isolated while integrating seamlessly with the `nvim-lspconfig` setup process managed by `mason-lspconfig.nvim`.

**Sources:** [nvim/lua/plugins/go.lua L1-L24](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L1-L24)

## LSP-Powered FeaturesLink copied!

Language servers provide a comprehensive set of features through the LSP protocol. These features are automatically available once a language server attaches to a buffer.

### Feature MatrixLink copied!

| LSP Feature | Protocol Method | User Action | Description |
| --- | --- | --- | --- |
| **Code Completion** | `textDocument/completion` | Insert mode typing | Context-aware suggestions including auto-imports |
| **Diagnostics** | `textDocument/publishDiagnostics` | Automatic | Real-time error/warning display |
| **Go to Definition** | `textDocument/definition` | `gd` (default) | Jump to symbol definition |
| **Go to Type Definition** | `textDocument/typeDefinition` | `gy` (default) | Jump to type definition |
| **Find References** | `textDocument/references` | `gr` (default) | List all references to symbol |
| **Hover Documentation** | `textDocument/hover` | `K` (default) | Display documentation popup |
| **Signature Help** | `textDocument/signatureHelp` | Insert mode | Function parameter hints |
| **Rename** | `textDocument/rename` | `<leader>cr` (LazyVim) | Rename symbol across workspace |
| **Code Actions** | `textDocument/codeAction` | `<leader>ca` (LazyVim) | Apply fixes and refactorings |
| **Formatting** | `textDocument/formatting` | `<leader>cf` (LazyVim) | Format document/range |
| **Symbol Search** | `textDocument/documentSymbol` | `<leader>ss` (LazyVim) | Search symbols in document |
| **Workspace Symbols** | `workspace/symbol` | `<leader>sS` (LazyVim) | Search symbols in workspace |

### LSP Request-Response FlowLink copied!

```mermaid
sequenceDiagram
  participant User
  participant Neovim Buffer
  participant LSP Client
  participant Language Server
  participant Analysis Engine

  note over User,Analysis Engine: Example: Hover Documentation Request
  User->>Neovim Buffer: Move cursor over symbol
  User->>Neovim Buffer: Press 'K' (hover)
  Neovim Buffer->>LSP Client: Request hover for position
  LSP Client->>Language Server: textDocument/hover {uri, position}
  Language Server->>Analysis Engine: Analyze symbol at position
  Analysis Engine->>Analysis Engine: Look up documentation
  Analysis Engine-->>Language Server: Documentation content
  Language Server-->>LSP Client: Hover response {contents: markdown}
  LSP Client-->>Neovim Buffer: Render hover window
  Neovim Buffer-->>User: Display documentation popup
  note over User,Analysis Engine: Example: Code Completion
  User->>Neovim Buffer: Type in insert mode
  Neovim Buffer->>LSP Client: Request completion
  LSP Client->>Language Server: textDocument/completion {uri, position, triggerKind}
  Language Server->>Analysis Engine: Get completion candidates
  Analysis Engine->>Analysis Engine: gopls: Check completeUnimported
  Analysis Engine->>Analysis Engine: Add missing imports
  Analysis Engine-->>Language Server: Completion items
  Language Server-->>LSP Client: Completion response {items: [...]}
  LSP Client-->>Neovim Buffer: Send to completion UI
  Neovim Buffer-->>User: Show completion menu
```

**Sources:** [nvim/lua/plugins/go.lua L15-L16](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L15-L16)

## Integration with Mason-LspconfigLink copied!

The `mason-lspconfig.nvim` plugin provides the bridge between `mason.nvim` and `nvim-lspconfig`, enabling automatic server setup when servers are installed through Mason.

### Automatic Setup FlowLink copied!

```mermaid
flowchart TD

LazyLoad["LazyVim loads plugins"]
MasonLspconfigSetup["mason-lspconfig.setup()"]
EnsureInstalled["ensure_installed table"]
AutomaticSetup["automatic_setup = true"]
ScanMason["Scan ~/.local/share/nvim/mason/bin/"]
FindServers["Detect installed servers"]
ReadConfigs["Read opts.servers from plugins"]
ApplyDefaults["Apply lspconfig defaults"]
MergeCustom["Merge custom settings"]
AttachServers["Call lspconfig.*.setup()"]
ServersRunning["Language servers ready"]
BufferAttach["Auto-attach on filetype match"]

LazyLoad --> MasonLspconfigSetup
AutomaticSetup --> ScanMason
FindServers --> ReadConfigs
AttachServers --> ServersRunning

subgraph Result ["Result"]
    ServersRunning
    BufferAttach
    ServersRunning --> BufferAttach
end

subgraph subGraph3 ["Configuration Application"]
    ReadConfigs
    ApplyDefaults
    MergeCustom
    AttachServers
    ReadConfigs --> ApplyDefaults
    ApplyDefaults --> MergeCustom
    MergeCustom --> AttachServers
end

subgraph subGraph2 ["Server Detection"]
    ScanMason
    FindServers
    ScanMason --> FindServers
end

subgraph subGraph1 ["Mason-Lspconfig Initialization"]
    MasonLspconfigSetup
    EnsureInstalled
    AutomaticSetup
    MasonLspconfigSetup --> EnsureInstalled
    MasonLspconfigSetup --> AutomaticSetup
end

subgraph subGraph0 ["Neovim Startup"]
    LazyLoad
end
```

This automatic setup eliminates the need for manual `require('lspconfig').<server>.setup()` calls for each language server. The bridge plugin detects servers installed by Mason and automatically configures them using both default and custom settings.

**Sources:** [nvim/lazy-lock.json L21-L37](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json#L21-L37)

## LSP Configuration HierarchyLink copied!

The LSP configuration system supports multiple layers of configuration, allowing for global defaults, server-specific defaults, and user customizations to coexist.

### Configuration PrecedenceLink copied!

```mermaid
flowchart TD

LspconfigDefaults["nvim-lspconfig defaults (built-in server configs)"]
LazyVimDefaults["LazyVim defaults (LazyVim distribution)"]
MasonLspconfigAuto["mason-lspconfig automatic setup (bridge defaults)"]
CustomServerOpts["Custom server opts (lua/plugins/*.lua)"]
BufferLocalOpts["Buffer-local overrides (runtime modifications)"]
MergedConfig["Merged Configuration"]
ServerSetup["lspconfig..setup(config)"]
AttachedServer["Server attached to buffer"]

LspconfigDefaults --> MergedConfig
LazyVimDefaults --> MergedConfig
MasonLspconfigAuto --> MergedConfig
CustomServerOpts --> MergedConfig
BufferLocalOpts --> MergedConfig

subgraph subGraph1 ["Final Configuration"]
    MergedConfig
    ServerSetup
    AttachedServer
    MergedConfig --> ServerSetup
    ServerSetup --> AttachedServer
end

subgraph subGraph0 ["Configuration Sources (Lowest to Highest Priority)"]
    LspconfigDefaults
    LazyVimDefaults
    MasonLspconfigAuto
    CustomServerOpts
    BufferLocalOpts
end
```

For example, the gopls configuration demonstrates this hierarchy:

1. **nvim-lspconfig** provides baseline gopls configuration
2. **LazyVim** may add common keybindings and UI integrations
3. **mason-lspconfig** ensures automatic setup when gopls is installed
4. **Custom configuration** [nvim/lua/plugins/go.lua L8-L20](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L8-L20)  adds specific analyses, completeUnimported, and gofumpt settings

**Sources:** [nvim/lua/plugins/go.lua L1-L24](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L1-L24)

 [nvim/lazy-lock.json L21-L37](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json#L21-L37)

## Server Management CommandsLink copied!

Language servers installed through Mason can be managed through both UI and command-line interfaces.

### Mason CommandsLink copied!

| Command | Description | Usage Example |
| --- | --- | --- |
| `:Mason` | Open Mason UI | Browse and install servers interactively |
| `:MasonInstall <server>` | Install specific server | `:MasonInstall gopls` |
| `:MasonUninstall <server>` | Uninstall server | `:MasonUninstall gopls` |
| `:MasonUpdate` | Update all installed packages | Automatic update of Mason registry |
| `:MasonLog` | Open Mason log file | Debug installation issues |

### LSP CommandsLink copied!

| Command | Description | Usage Example |
| --- | --- | --- |
| `:LspInfo` | Show attached servers | View servers for current buffer |
| `:LspStart <server>` | Manually start server | `:LspStart gopls` |
| `:LspStop <server>` | Stop server | `:LspStop gopls` |
| `:LspRestart` | Restart all servers | Apply configuration changes |

**Sources:** [nvim/lazy-lock.json L21-L23](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lazy-lock.json#L21-L23)

## Diagnostic ConfigurationLink copied!

Language servers provide diagnostics (errors, warnings, hints) which are displayed through Neovim's diagnostic system. LazyVim configures these with sensible defaults including virtual text, signs, and underlines.

### Diagnostic Display LocationsLink copied!

```mermaid
flowchart TD

ServerDiag["Server generates diagnostics"]
DiagBuffer["vim.diagnostic buffer"]
VirtualText["Virtual Text (inline, end of line)"]
Signs["Signs (gutter icons)"]
Underline["Underline (squiggly lines)"]
FloatingWindow["Floating Window (on hover)"]
QuickfixList["Quickfix List (:copen)"]
TroubleList["Trouble.nvim (xx)"]

ServerDiag --> DiagBuffer
DiagBuffer --> VirtualText
DiagBuffer --> Signs
DiagBuffer --> Underline
DiagBuffer --> FloatingWindow
DiagBuffer --> QuickfixList
DiagBuffer --> TroubleList

subgraph subGraph2 ["Display Methods"]
    VirtualText
    Signs
    Underline
    FloatingWindow
    QuickfixList
    TroubleList
end

subgraph subGraph1 ["Neovim Diagnostic System"]
    DiagBuffer
end

subgraph subGraph0 ["Language Server"]
    ServerDiag
end
```

Diagnostics are severity-categorized as ERROR, WARN, INFO, or HINT, each with distinct visual indicators. The gopls configuration with `staticcheck: true` [nvim/lua/plugins/go.lua L14](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L14-L14)

 enables comprehensive static analysis, resulting in more detailed diagnostic information.

**Sources:** [nvim/lua/plugins/go.lua L14](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L14-L14)

## Performance ConsiderationsLink copied!

Language servers can be resource-intensive, particularly for large codebases. The configuration includes several optimizations:

### Server Lifecycle ManagementLink copied!

```mermaid
stateDiagram-v2
    [*] --> Unloaded : "Buffer closed or wrong filetype"
    Unloaded --> Starting : "Open file with matching filetype"
    Starting --> Running : "Server initialized"
    Running --> Analyzing : "Analysis complete"
    Analyzing --> Running : "Analysis complete"
    Running --> Idle : "No activity for 30s"
    Idle --> Running : "No activity for 30s"
    Running --> Stopping : "LspStop or buffer closed"
    Stopping --> Unloaded : "User activity"
    Idle --> Stopping : "Workspace timeout"
```

The gopls configuration includes `completeUnimported: true` [nvim/lua/plugins/go.lua L16](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L16-L16)

 which may increase completion latency slightly as the server searches the entire module graph, but provides superior developer experience by automatically suggesting and importing packages.

**Sources:** [nvim/lua/plugins/go.lua L16](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L16-L16)

## TroubleshootingLink copied!

Common LSP issues and their resolution paths:

| Issue | Diagnostic Command | Common Causes | Resolution |
| --- | --- | --- | --- |
| Server not attaching | `:LspInfo` | Server not installed, wrong filetype | Check Mason installation, verify filetype detection |
| No completions | `:lua =vim.lsp.get_clients()` | Server not initialized, capabilities missing | Restart server, check server logs |
| Diagnostics not showing | `:lua =vim.diagnostic.get()` | Diagnostics disabled, server error | Check diagnostic configuration, review server logs |
| Slow performance | `:LspInfo` check client count | Multiple servers attached, large workspace | Reduce `root_dir` scope, disable unused servers |
| Auto-import not working | Check `opts.servers.gopls.settings.gopls.completeUnimported` | Setting disabled or wrong | Verify [nvim/lua/plugins/go.lua L16](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L16-L16) <br>  is `true` |

The `:LspLog` command opens the LSP client log file at `~/.local/state/nvim/lsp.log` for detailed debugging information.

**Sources:** [nvim/lua/plugins/go.lua L16](https://github.com/Klaudioz/dotfiles/blob/2febda55/nvim/lua/plugins/go.lua#L16-L16)

Refresh this wiki

Last indexed: 18 December 2025 ([2febda](https://github.com/Klaudioz/dotfiles/commit/2febda55))

### On this page

* [Language Server Protocol (LSP)](#4.3-language-server-protocol-lsp)
* [Purpose and Scope](#4.3-purpose-and-scope)
* [LSP Architecture Overview](#4.3-lsp-architecture-overview)
* [Component Interaction Diagram](#4.3-component-interaction-diagram)
* [Plugin Version Management](#4.3-plugin-version-management)
* [Mason.nvim: Language Server Installation](#4.3-masonnvim-language-server-installation)
* [Installation Architecture](#4.3-installation-architecture)
* [nvim-lspconfig: Server Configuration](#4.3-nvim-lspconfig-server-configuration)
* [Configuration Flow](#4.3-configuration-flow)
* [Language-Specific Configurations](#4.3-language-specific-configurations)
* [Go Language Server (gopls)](#4.3-go-language-server-gopls)
* [Configuration Extension Pattern](#4.3-configuration-extension-pattern)
* [LSP-Powered Features](#4.3-lsp-powered-features)
* [Feature Matrix](#4.3-feature-matrix)
* [LSP Request-Response Flow](#4.3-lsp-request-response-flow)
* [Integration with Mason-Lspconfig](#4.3-integration-with-mason-lspconfig)
* [Automatic Setup Flow](#4.3-automatic-setup-flow)
* [LSP Configuration Hierarchy](#4.3-lsp-configuration-hierarchy)
* [Configuration Precedence](#4.3-configuration-precedence)
* [Server Management Commands](#4.3-server-management-commands)
* [Mason Commands](#4.3-mason-commands)
* [LSP Commands](#4.3-lsp-commands)
* [Diagnostic Configuration](#4.3-diagnostic-configuration)
* [Diagnostic Display Locations](#4.3-diagnostic-display-locations)
* [Performance Considerations](#4.3-performance-considerations)
* [Server Lifecycle Management](#4.3-server-lifecycle-management)
* [Troubleshooting](#4.3-troubleshooting)

Ask Devin about dotfiles

  

Syntax error in text

mermaid version 11.4.1

Syntax error in text

mermaid version 11.4.1